{"ast":null,"code":"const isNil = require(\"lodash/isNil\");\n\nconst VERBOSE_ARG = \"--verbose\";\nconst CONFIG_ARG = \"--config\";\n\nfunction createNullableArg(value) {\n  return {\n    isProvided: !isNil(value),\n    value\n  };\n}\n\nconst processedArgs = {\n  verbose: false,\n  config: createNullableArg()\n};\n\nfunction findCliArg(key) {\n  const index = process.argv.indexOf(key);\n  return {\n    key,\n    index,\n    isProvided: index !== -1\n  };\n}\n\nfunction getCliArgWithValue(key) {\n  const result = function () {\n    let isProvided = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n    let value = arguments.length > 1 ? arguments[1] : undefined;\n    let index = arguments.length > 2 ? arguments[2] : undefined;\n    return {\n      key,\n      isProvided,\n      value,\n      index\n    };\n  };\n\n  const arg = findCliArg(key);\n\n  if (arg.isProvided) {\n    const valueIndex = arg.index + 1;\n\n    if (process.argv[valueIndex]) {\n      return result(true, process.argv[valueIndex], arg.index);\n    }\n  }\n\n  return result();\n}\n\nconst jestConflictingArg = function (key) {\n  let hasValue = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n  return {\n    key,\n    hasValue\n  };\n}; // prettier-ignore\n\n\nconst jestConflictingArgs = [jestConflictingArg(CONFIG_ARG, true)];\n\nfunction removeJestConflictingCustomCliArgs() {\n  jestConflictingArgs.forEach(x => {\n    const arg = findCliArg(x.key);\n\n    if (arg.isProvided) {\n      process.argv.splice(arg.index, x.hasValue ? 2 : 1);\n    }\n  });\n}\n\nfunction findArgsFromCli() {\n  const verbose = findCliArg(VERBOSE_ARG);\n  const config = getCliArgWithValue(CONFIG_ARG);\n  removeJestConflictingCustomCliArgs();\n  const values = {\n    verbose: verbose.isProvided ? true : undefined,\n    config: config.isProvided ? config.value : undefined\n  };\n  setArgs(values);\n}\n\nfunction setArgs(values) {\n  if (!isNil(values)) {\n    if (!isNil(values.verbose)) {\n      processedArgs.verbose = values.verbose;\n    }\n\n    if (!isNil(values.config)) {\n      processedArgs.config = createNullableArg(values.config);\n    }\n  }\n}\n\nfunction getArgs() {\n  return processedArgs;\n}\n\nmodule.exports = {\n  getArgs,\n  setArgs,\n  findArgsFromCli\n};","map":{"version":3,"names":["isNil","require","VERBOSE_ARG","CONFIG_ARG","createNullableArg","value","isProvided","processedArgs","verbose","config","findCliArg","key","index","process","argv","indexOf","getCliArgWithValue","result","arg","valueIndex","jestConflictingArg","hasValue","jestConflictingArgs","removeJestConflictingCustomCliArgs","forEach","x","splice","findArgsFromCli","values","undefined","setArgs","getArgs","module","exports"],"sources":["/Users/mac/Documents/nuevo/node_modules/@craco/craco/lib/args.js"],"sourcesContent":["const isNil = require(\"lodash/isNil\");\n\nconst VERBOSE_ARG = \"--verbose\";\nconst CONFIG_ARG = \"--config\";\n\nfunction createNullableArg(value) {\n    return {\n        isProvided: !isNil(value),\n        value\n    };\n}\n\nconst processedArgs = {\n    verbose: false,\n    config: createNullableArg()\n};\n\nfunction findCliArg(key) {\n    const index = process.argv.indexOf(key);\n\n    return {\n        key,\n        index,\n        isProvided: index !== -1\n    };\n}\n\nfunction getCliArgWithValue(key) {\n    const result = (isProvided = false, value, index) => ({\n        key,\n        isProvided,\n        value,\n        index\n    });\n\n    const arg = findCliArg(key);\n\n    if (arg.isProvided) {\n        const valueIndex = arg.index + 1;\n\n        if (process.argv[valueIndex]) {\n            return result(true, process.argv[valueIndex], arg.index);\n        }\n    }\n\n    return result();\n}\n\nconst jestConflictingArg = (key, hasValue = false) => ({\n    key,\n    hasValue\n});\n\n// prettier-ignore\nconst jestConflictingArgs = [\n    jestConflictingArg(CONFIG_ARG, true),\n];\n\nfunction removeJestConflictingCustomCliArgs() {\n    jestConflictingArgs.forEach(x => {\n        const arg = findCliArg(x.key);\n\n        if (arg.isProvided) {\n            process.argv.splice(arg.index, x.hasValue ? 2 : 1);\n        }\n    });\n}\n\nfunction findArgsFromCli() {\n    const verbose = findCliArg(VERBOSE_ARG);\n    const config = getCliArgWithValue(CONFIG_ARG);\n\n    removeJestConflictingCustomCliArgs();\n\n    const values = {\n        verbose: verbose.isProvided ? true : undefined,\n        config: config.isProvided ? config.value : undefined\n    };\n\n    setArgs(values);\n}\n\nfunction setArgs(values) {\n    if (!isNil(values)) {\n        if (!isNil(values.verbose)) {\n            processedArgs.verbose = values.verbose;\n        }\n\n        if (!isNil(values.config)) {\n            processedArgs.config = createNullableArg(values.config);\n        }\n    }\n}\n\nfunction getArgs() {\n    return processedArgs;\n}\n\nmodule.exports = {\n    getArgs,\n    setArgs,\n    findArgsFromCli\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}